<Window x:Class="ProstePrototype.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
		xmlns:wpf="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf" 
        xmlns:local="clr-namespace:ProstePrototype"
        mc:Ignorable="d"
		Title="T-Manager 6.1" Height="768" Width="1400"
		WindowStyle="None"
		xmlns:uc="clr-namespace:ProstePrototype.WpfControls">
    <!-- WindowState="Maximized" -->

    <Window.CommandBindings>
        <CommandBinding Command="New" CanExecute="NewCommand_CanExecute" Executed="NewCommand_Executed" />
    </Window.CommandBindings>
    <Window.Resources>
        <!--<local:GridLengthConverter x:Key="gridLengthConverter" />-->
        <Style x:Key="FileStyle" TargetType="{x:Type MenuItem}">
            <Setter Property="ToolTip">
                <Setter.Value>
                    <ToolTip>
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="{Binding Name}"/>
                        </StackPanel>
                    </ToolTip>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="MenuItemStyle" TargetType="{x:Type MenuItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type MenuItem}">
                        <Border x:Name="MenuItemBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <ContentPresenter Content="{TemplateBinding Header}" ContentSource="Header" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                <Popup AllowsTransparency="True" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" Placement="Bottom" PlacementTarget="{Binding ElementName=MenuItemBorder}"
									   HorizontalOffset="1" VerticalOffset="-1">
                                    <Border Background="{Binding ElementName=languagesMenu, Path=Background}" BorderThickness="1" BorderBrush="{StaticResource DefaultColor}" Padding="2">
                                        <ScrollViewer Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">
                                            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ToolTip">
                <Setter.Value>
                    <ToolTip>
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="{DynamicResource MainMenuLanguages}"/>
                        </StackPanel>
                    </ToolTip>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="FileMainStyle" TargetType="{x:Type MenuItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type MenuItem}">
                        <Border x:Name="MenuItemBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                            <Grid VerticalAlignment="Center">
                                <ContentPresenter Content="{TemplateBinding Header}" ContentSource="Header" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                <Popup AllowsTransparency="True" IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}" Placement="Bottom" PlacementTarget="{Binding ElementName=MenuItemBorder}"
									   HorizontalOffset="1" VerticalOffset="-1">
                                    <Border Background="{Binding ElementName=languagesMenu, Path=Background}" BorderThickness="1" BorderBrush="{StaticResource DefaultColor}" Padding="2">
                                        <ScrollViewer Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">
                                            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="ToolTip">
                <Setter.Value>
                    <ToolTip>
                        <StackPanel Orientation="Vertical">
                            <TextBlock Text="{DynamicResource MainMenuFile}"/>
                        </StackPanel>
                    </ToolTip>
                </Setter.Value>
            </Setter>
        </Style>
        
    </Window.Resources>
    <Border BorderBrush="#8090aa" BorderThickness="0" CornerRadius="2">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="100" />
                <RowDefinition Height="3" />
                <RowDefinition Height="29" />
                <RowDefinition Height="3" />
                <RowDefinition Height="*" />
                <RowDefinition Height="3" />
                <RowDefinition Height="40" />
            </Grid.RowDefinitions>
            <Grid x:Name="mainGrid" Background="{Binding Background}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="60" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition Width="50" />
                </Grid.ColumnDefinitions>
                <Image Source="/Images/teletek_logo_m.png" Margin="10,0,0,-25" Width="380" Height="75" MouseLeftButtonDown="mainPanel_MouseLeftButtonDown"/>

                <DockPanel Grid.Column="1" >
                    <Button x:Name="scan_btn" ToolTip="{DynamicResource MainMenuScan}" Click="Scan_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf02a;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>

                <DockPanel Grid.Column="2">
                    <Button x:Name="export_btn" ToolTip="{DynamicResource MainMenuExport}" Click="Export_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf56e;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>

                <StackPanel Grid.Column="3" x:Name="filePanel" Background="{Binding Background}" MouseLeftButtonDown="mainPanel_MouseLeftButtonDown">
                    <DockPanel Height="100">
                        <Menu x:Name="fileMenu" DockPanel.Dock="Top" Height="100" VerticalAlignment="Center" Background="{Binding Background}" Foreground="{Binding Foreground}">
                            <Menu.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <VirtualizingStackPanel Orientation="Horizontal" />
                                </ItemsPanelTemplate>
                            </Menu.ItemsPanel>
                            <MenuItem Style="{StaticResource FileMainStyle}">
                                <MenuItem.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <VirtualizingStackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </MenuItem.ItemsPanel>
                                <MenuItem.Header >
                                    <DockPanel>
                                        <TextBlock Text="&#xe185;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="&#xf0d7;" FontFamily="{StaticResource fa_solid}" FontSize="14" VerticalAlignment="Bottom"></TextBlock>
                                    </DockPanel>
                                </MenuItem.Header>
                                <MenuItem Style="{StaticResource FileStyle}" ToolTip="{DynamicResource MainMenuNew}" Click="New_Clicked">
                                    <MenuItem.Header>
                                        <TextBlock Text="&#xe4ee;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom" Padding="0, 20"></TextBlock>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Click="Open_Clicked" Style="{StaticResource FileStyle}" ToolTip="{DynamicResource MainMenuOpen}">
                                    <MenuItem.Header>
                                        <TextBlock Text="&#xf07c;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Style="{StaticResource FileStyle}" ToolTip="{DynamicResource MainMenuSave}">
                                    <MenuItem.Header>
                                        <TextBlock Text="&#xf0c7;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                                    </MenuItem.Header>
                                </MenuItem>
                                <MenuItem Click="SaveAs_Clicked" Style="{StaticResource FileStyle}" ToolTip="{DynamicResource MainMenuSaveas}">
                                    <MenuItem.Header>
                                        <TextBlock Text="&#xf570;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                                    </MenuItem.Header>
                                </MenuItem>
                            </MenuItem>
                        </Menu>
                    </DockPanel>
                </StackPanel>

                <DockPanel Grid.Column="4">
                    <Button x:Name="write_btn" ToolTip="{DynamicResource MainMenuWrite}" Click="Write_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf31c;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>
                <DockPanel Grid.Column="5">
                    <Button x:Name="log_btn" ToolTip="{DynamicResource MainMenuLog}" Click="New_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xe59a;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>
                <DockPanel Grid.Column="6">
                    <Button x:Name="clock_btn" ToolTip="{DynamicResource MainMenuClock}" Click="New_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf017;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>
                <DockPanel Grid.Column="7">
                    <Button x:Name="verify_btn" ToolTip="{DynamicResource MainMenuVerify}" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf772;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>

                <DockPanel Grid.Column="8">
                    <Button x:Name="settings_btn" ToolTip="{DynamicResource MainMenuSettings}" Click="SettingsClicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                        <TextBlock Text="&#xf013;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                </DockPanel>
                <StackPanel Grid.Column="9" x:Name="mainPanel" Background="{Binding Background}" MouseLeftButtonDown="mainPanel_MouseLeftButtonDown">
                    <DockPanel x:Name="languagesPanel" Height="100" HorizontalAlignment="Right" >
                        <uc:LanguageControl x:Name="languageButton" />
                    </DockPanel>
                </StackPanel>
                
                <Grid Grid.Column="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button x:Name="minimize_btn" ToolTip="{DynamicResource MainMenuToTray}" Click="Button_Minimize_Click" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="1, 0, 0, 1">
                        <TextBlock Text="&#xf2d1;" FontFamily="{StaticResource fa_solid}" FontSize="24" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                    <DockPanel Grid.Row="1">
                        <Button x:Name="changeTheme_btn" ToolTip="{DynamicResource MainMenuTheme}" Click="ChangeTheme_Click" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                            <TextBlock Text="&#xf042;" FontFamily="{StaticResource fa_solid}" FontSize="36"/>
                        </Button>
                    </DockPanel>
                </Grid>
                <Grid Grid.Column="11">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button Grid.Row="0" x:Name="maximize_btn" ToolTip="{DynamicResource MainMenuRestore}" Click="Button_Maximize_Click" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0, 0, 0, 1">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Style.Triggers>
                                    <DataTrigger 
									Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}"
									Value="Maximized">
                                        <Setter Property="Content">
                                            <Setter.Value>
                                                <TextBlock Text="&#xf2d0;" FontFamily="{StaticResource fa_solid}" FontSize="24" VerticalAlignment="Bottom"></TextBlock>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                    <DataTrigger 
									Binding="{Binding WindowState, RelativeSource={RelativeSource AncestorType=Window}}"
									Value="Normal">
                                        <Setter Property="Content">
                                            <Setter.Value>
                                                <TextBlock Text="&#xf2d2;" FontFamily="{StaticResource fa_solid}" FontSize="24" VerticalAlignment="Bottom"></TextBlock>
                                            </Setter.Value>
                                        </Setter>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <DockPanel Grid.Row="1">
                        <Button x:Name="update_btn" ToolTip="{DynamicResource MainMenuUpdate}" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                            <TextBlock Text="&#xe4c2;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                        </Button>
                    </DockPanel>
                </Grid>
                <Grid Grid.Column="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Button x:Name="exit_btn" ToolTip="{DynamicResource MainMenuExit}" Click="Exit_Clicked" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0, 0, 0, 1">
                        <TextBlock Text="&#xf00d;" FontFamily="{StaticResource fa_solid}" FontSize="24" VerticalAlignment="Bottom"></TextBlock>
                    </Button>
                    <DockPanel Grid.Row="1">
                        <Button x:Name="help_btn" ToolTip="{DynamicResource MainMenuHelp}" Background="{Binding Background}" Foreground="{Binding Foreground}" BorderThickness="0">
                            <TextBlock Text="&#xf05a;" FontFamily="{StaticResource fa_solid}" FontSize="36" VerticalAlignment="Bottom"></TextBlock>
                        </Button>
                    </DockPanel>
                </Grid>
            </Grid>
            <GridSplitter Grid.Row="1" Height="3" HorizontalAlignment="Stretch" />
            <StackPanel Grid.Row="2" x:Name="breadCrumbsField" Background="{Binding Background}">
                <ListView x:Name="lvBreadCrumbs" Margin="20, 0" 
				FontSize="14" BorderThickness="0" VerticalContentAlignment="Center">
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"></StackPanel>
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                </ListView>
            </StackPanel>
            <GridSplitter x:Name="gsp3" Grid.Row="3" Height="{Binding Height}" HorizontalAlignment="Stretch" />
            <Grid x:Name="gridBrowsers" Grid.Row="4" Background="{Binding Background}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="Column1" Width="216*" />
                    <ColumnDefinition Width="5" />
                    <ColumnDefinition Width="1079*" />
                </Grid.ColumnDefinitions>
                <wpf:ChromiumWebBrowser
				Grid.Column="0"
				x:Name="wb1"
                MinWidth="{Binding MinWidth}"
				Background="Transparent"
				Margin="0, 0, 0, 0"
				Padding="0, 0, 0, 50"
				JavascriptMessageReceived="wb_PostMessage"
				/>
                <!--Width="{Binding ElementName=Column1, Path=Width, Converter={StaticResource gridLengthConverter}}"-->
                <GridSplitter x:Name="Splitter1" Grid.Column="1" DragCompleted="GridSplitter1_DragCompleted" HorizontalAlignment="Left" VerticalAlignment="Stretch" ResizeBehavior="PreviousAndNext"/>
                <wpf:ChromiumWebBrowser
				Grid.Column="2"
				x:Name="wb2"
				Margin="{Binding Margin}"                
				JavascriptMessageReceived="wb_PostMessage"
				Background="Transparent"
                Panel.ZIndex="99"
			/>
            </Grid>
            <GridSplitter Grid.Row="5" Height="3" HorizontalAlignment="Stretch" />
            <StackPanel Grid.Row="6" x:Name="grid6" Background="{Binding Background}" VerticalAlignment="Stretch">
                <TextBlock x:Name="textblock_bottom"  FontSize="14" HorizontalAlignment="Center" VerticalAlignment="Center" 
				TextWrapping="Wrap" Background="{Binding Background}" Foreground="{Binding Foreground}"><Run Text="{DynamicResource MainMenuCopyright}"/><Run FontWeight="Bold" Text="{DynamicResource MainMenuTE}"/></TextBlock>
                <ProgressBar x:Name="progressBar1" HorizontalAlignment="Right" Width="400" Height="20" Panel.ZIndex="2" Background="Transparent" BorderThickness="0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
