<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="../IRIS.css" />
    <!-- Datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />

    <title>Teletek ProsTe</title>
</head>
<body>
    <div class="container" id="divMain">
        <!-- IMPORTANT When disable input, put class .disabled in the .form-item class -->

        <div id="new_device" class="row m15 no-gutter">
            <a href="javascript:void" class="col-sm-3">
                <div class="btnStyle">
                    <img src="../../Images/102. motherboard.ico" alt="" width="25.6" height="25.6" class="m15" />
                    <div class="someS">
                        <h5>Main Board</h5>
                    </div>
                </div>
            </a>
        </div>

        <button style="display: block;" type="button" data-toggle="modal" data-target="#deviceList" class="m-4" id="device_btn">
            <i class="fa-solid fa-plus 5x"></i> Add New Device
        </button>

        <div class="modal fade bd-example" tabindex="-1" role="dialog" id="deviceList" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="row">
                        <div class="col-4">
                            <div class="list-group" id="list-tab" role="tablist">
                                <button type="button" class="list-group-item list-group-item-action active show" id="list-lcd32s-list" data-toggle="tab" href="#list-lcd32s" role="tab" aria-controls="list-lcd32s" aria-selected="false">LCD 32S</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-lcd32-list" data-toggle="tab" href="#list-lcd32" role="tab" aria-controls="list-lcd32" aria-selected="false">LCD 32</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-led32-list" data-toggle="tab" href="#list-led32" role="tab" aria-controls="list-led32" aria-selected="false">LED 32</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-led16-list" data-toggle="tab" href="#list-led16" role="tab" aria-controls="list-led16" aria-selected="false">LED 16</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-led16a-list" data-toggle="tab" href="#list-led16a" role="tab" aria-controls="list-led16a" aria-selected="false">LED 16A</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-led8-list" data-toggle="tab" href="#list-led8" role="tab" aria-controls="list-led8" aria-selected="false">LED 8</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-pgm8_expander-list" data-toggle="tab" href="#list-pgm8_expander" role="tab" aria-controls="list-pgm8_expander" aria-selected="false">PGM 8 Expander</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-zone8_expander-list" data-toggle="tab" href="#list-zone8_expander" role="tab" aria-controls="list-zone8_expander" aria-selected="false">Zone 8 Expander</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-wireless_expander-list" data-toggle="tab" href="#list-wireless_expander" role="tab" aria-controls="list-wireless_expander" aria-selected="false">Wireless Expander</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-proxy_card_reader_it-list" data-toggle="tab" href="#list-proxy_card_reader_it" role="tab" aria-controls="list-proxy_card_reader_it" aria-selected="false">Proxy card Reader IT</button>
                                <button type="button" class="list-group-item list-group-item-action" id="list-proxy_card_reader-list" data-toggle="tab" href="#list-proxy_card_reader" role="tab" aria-controls="list-proxy_card_reader" aria-selected="false">Proxy card Reader</button>
                            </div>
                        </div>
                        <div class="col-8">
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade active show" id="list-lcd32s" role="tabpanel" aria-labelledby="list-lcd32s-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>lcd 32s</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/43. KeyboardNum (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="lcd32s_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-lcd32" role="tabpanel" aria-labelledby="list-lcd32-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>lcd 32</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/42. Keyboard (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="lcd32_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-led32" role="tabpanel" aria-labelledby="list-led32-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>led 32</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/42. Keyboard (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="led32_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-led16" role="tabpanel" aria-labelledby="list-led16-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>led 16</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/42. Keyboard (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="led16_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-led16a" role="tabpanel" aria-labelledby="list-led16a-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>led 16A</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/42. Keyboard (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="led16a_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-led8" role="tabpanel" aria-labelledby="list-led8-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>led 8</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/42. Keyboard (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="led8_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-pgm8_expander" role="tabpanel" aria-labelledby="list-pgm8_expander-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>pgm 8 Expander</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/03.PanelsInNetwork.ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="pgm8_expander_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-zone8_expander" role="tabpanel" aria-labelledby="list-zone8_expander-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>zone 8 Expander</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/03.PanelsInNetwork.ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="zone8_expander_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-wireless_expander" role="tabpanel" aria-labelledby="list-wireless_expander-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>wireless Expander</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/03.PanelsInNetwork.ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="wireless_expander_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-proxy_card_reader_it" role="tabpanel" aria-labelledby="list-proxy_card_reader_it-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>Proxy card Reader IT</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/44. Proxi (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="proxy_card_reader_it_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-proxy_card_reader" role="tabpanel" aria-labelledby="list-proxy_card_reader-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>Proxy card Reader</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <img src="../../Images/44. Proxi (CA62).ico" alt="" width="100" height="100" class="m15" />
                                    </div>
                                    <div class="row m-1 align-self-end justify-content-end">
                                        <button type="button" class="btn-round" id="proxy_card_reader_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div style="bottom: 10px; position: sticky;" class="buttons-row mt-5">
            <button type="button" class="btn-round btn-blue">Save</button>
            <button type="button" class="btn-round btn-border-black">Back</button>
        </div>
        <script>
            function myFunction(id) {
                var element = document.getElementById(id);
                element.value = element.value.slice(0, element.dataset.maxlength);
            }
            function myFunction2(id) {
                var element = document.getElementById(id);
                if (element.value > element.max) {
                    element.value = element.max;
                }
            }
            function myFunction3(id) {
                var element = document.getElementById(id);
                if (!element.value.includes(":")) {
                    console.log('before:', element.value);
                    element.value += ":";
                    console.log('after:', element.value);
                }
                const regex = new RegExp("[0-9]{1,2}:[0-9]{0,2}");
                console.log('test', regex.test(element.value));
                element.value = regex.exec(element.value);
                console.log(element.value);
            }

            function addDevice() {
                var el = document.getElementById("deviceList");
                if (el.style.display === "none") {
                    el.style.display = "block";
                } else {
                    el.style.display = "none";
                }
            }

            var lst = [];
            const devices = 62;
            function addConcreteDevice(id) {
                if (lst.length < devices) {
                    var last = lst.length;
                } else { 
                    return;
                }
                let imgSource = "../../Images/";
                let title = id.substr(0, id.length - 4).toUpperCase().replaceAll("_", " ");
                switch (id) {
                    case "lcd32s_btn": imgSource += "43. KeyboardNum (CA62).ico"; break;
                    case "lcd32_btn":
                    case "led32_btn":
                    case "led16_btn":
                    case "led16a_btn":
                    case "led8a_btn":
                        imgSource += "42. Keyboard (CA62).ico"; break;
                    case "proxy_card_reader_it_btn":
                    case "proxy_card_reader_btn": imgSource += "44. Proxi (CA62).ico"; break;
                    default: imgSource += "03.PanelsInNetwork.ico"; 
                }
                const newUserElement = `
                    <a href="javascript:void" class="col-sm-3" id=${id}>
                        <div class="btnStyle">
                            <img src="${imgSource}" alt="" width="25.6" height="25.6" class="m15" />
                            <div class="someS">
                                <h5>${title}</h5>
                            </div>
                        </div>
                    </a>
                `;
                var element = document.getElementById("new_device");
                var new_inner = `
                    ${element.innerHTML}
                    ${newUserElement}
                `;
                lst.push(last);
                element.innerHTML = new_inner;

                //// reordering
                //var main = document.getElementById('new_device');

                //[].map.call(main.children, Object).sort(function (a, b) {
                //    return +a.id.match(/\d+/) - +b.id.match(/\d+/);
                //}).forEach(function (elem) {
                //    main.appendChild(elem);
                //});

                // button display check
                if (lst.length === devices) {
                    let button = document.getElementById("device_btn");
                    button.style.display = "none";

                    //} else {
                    //    if (lst.includes(id)) {
                    //        var elem = document.getElementById(`${id}`);
                    //        elem.parentNode.removeChild(elem);
                    //        lst = lst.filter(function (item) {
                    //            return item !== id
                    //        })

                    //        let button = document.getElementById("device_btn");
                    //        if (lst.length < 3 && button.style.display === "none") {
                    //            button.style.display = "block";
                    //        }
                    //    } else {
                    //        return;
                    //    }
                }
                $('#deviceList').modal('toggle');
                }
        </script>
    </div>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/da39e5d130.js" crossorigin="anonymous"></script>
    <!-- DatePicker Script -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script>
        function sendMessage(bc) {
            CefSharp.PostMessage(bc);
        }
        $(document).ready(() => {
            sendMessage("Devices|ECLIPSE|Timeslots");
        });
    </script>
</body>
</html>
