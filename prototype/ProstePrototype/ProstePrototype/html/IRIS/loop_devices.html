<!DOCTYPE html>
<html lang="en" class="fullHeight">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../boostrap.css" />
    <link rel="stylesheet" href="../imports/css/all.css" />
    <link rel="stylesheet" href="../IRIS.css" />

    <title>Teletek Manager</title>
</head>
<body class="fullHeight">
    <div class="container fullHeight" id="divMain">
        <!-- IMPORTANT When disable input, put class .disabled in the .form-item class -->

        <div class="row fullHeight">
            <div class="col-3 bl fire scroll">
                <div id="new_device" class="row">
                    <p>Add up to 4 loops</p>
                </div>
            </div>
            <div class="col-9 fullHeight">
                <div id="selected_device" class="fullHeight">

                </div>
            </div>
        </div>

        <div class="modal fade bd-example" tabindex="-1" role="dialog" id="deviceList" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <!--<div class="row">
                        <div class="col-8">-->
                            <div class="row list-group fire" id="list-tab" role="tablist">
                                <button 
                                    type="button"
                                    class="list-group-item col-6 active show"
                                    id="list-teletek_loop" data-toggle="tab"
                                    onclick="javascript: addConcreteDevice(this.id)"
                                    role="tab"
                                    aria-controls="list-teletek_loop"
                                    aria-selected="false">
                                    <div class="btnStyle fire">
                                        <i class="fa-solid fa-arrows-spin fa-3x fire p15" aria-hidden="true">
                                            <br /><span class="someS">
                                                <span class="h5">Teletek Loop</span>
                                            </span>
                                        </i>                                        
                                    </div>
                                </button>


                                <button 
                                    type="button" 
                                    class="list-group-item col-6" 
                                    id="list-system_sensor_loop" 
                                    data-toggle="tab" 
                                    onclick="javascript: addConcreteDevice(this.id)" 
                                    role="tab" 
                                    aria-controls="list-system_sensor_loop" 
                                    aria-selected="false">
                                    <div class="btnStyle fire">
                                        <i class="fa-solid fa-arrows-spin fa-3x fire p15" aria-hidden="true">
                                            <br /><span class="someS">
                                                <span class="h5">System Sensor Loop</span>
                                            </span>
                                        </i>
                                    </div>
                                </button>
                            </div>
                        <!--</div>-->
                        <!--<div class="col-4">
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane fade active show" id="list-teletek_loop" role="tabpanel" aria-labelledby="list-teletek_loop-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>Teletek Loop</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <i class="fa-solid fa-arrows-spin fire fa-3x"></i>-->
                                        <!--<img src="../../Images/1013.LoopDecices.ico" alt="" width="100" height="100" class="m15" />-->
                                    <!--</div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="teletek_loop_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="list-system_sensor_loop" role="tabpanel" aria-labelledby="list-system_sensor_loop-list">
                                    <div class="row m-1 justify-content-center">
                                        <h2>System Sensor Loop</h2>
                                    </div>
                                    <div class="row m-1 justify-content-center">
                                        <i class="fa-solid fa-arrows-spin fire fa-3x"></i>-->
                                        <!--<img src="../../Images/1013.LoopDecices.ico" alt="" width="100" height="100" class="m15" />-->
                                    <!--</div>
                                    <div class="row m-1 justify-content-end">
                                        <button type="button" class="btn-round" id="system_sensor_loop_btn" onclick="javascript: addConcreteDevice(this.id)">Add</button>
                                    </div>
                                </div>
                            </div>
                        </div>-->
                    <!--</div>-->
                </div>
            </div>
        </div>

        <div style="bottom: 10px; position: absolute;" class="buttons-row mt-5">
            <!--<button type="button" class="btn-round btn-blue">Save</button>
            <button type="button" class="btn-round btn-border-black">Back</button>-->
            <button style="display: inline-flex;" type="button" data-toggle="modal" data-target="#deviceList" id="device_btn" class="btn-round btn-border-black">
                <i class="fa-solid fa-plus 5x"></i> Add New Device
            </button>
        </div>


        <script>
            function myFunction(id) {
                var element = document.getElementById(id);
                element.value = element.value.slice(0, element.dataset.maxlength);
            }
            function myFunction2(id) {
                var element = document.getElementById(id);
                if (+element.value > +element.max) {
                    element.value = element.max;
                }
            }
            function myFunction3(id) {
                var element = document.getElementById(id);
                if (!element.value.includes(":")) {
                    console.log('before:', element.value);
                    element.value += ":";
                    console.log('after:', element.value);
                }
                const regex = new RegExp("[0-9]{1,2}:[0-9]{0,2}");
                console.log('test', regex.test(element.value));
                element.value = regex.exec(element.value);
                console.log(element.value);
            }

            function addActive(id) {
                $(id).on('click', '.btnStyle', function () {
                    $(id).find('.btnStyle').removeClass('active');// here remove class active from all btnStyle fire
                    $(this).addClass('active');// here apply selected class on clicked btnStyle fire
                });
            }

            function showDevice(id) {
                var el = document.getElementById("selected_device");

                var target = `<div class="row fullHeight">
                                    <div class="col-3 bl fire scroll">
                                        <div id="new_device_${id}" class="row">

                                        </div>
                                    </div>
                                    <div class="col-9" style="z-index: 1;height: fit-content;">
                                        <div id="selected_device_${id}" style="background: white;">

                                        </div>
                                    </div>
                                </div>

                                <div class="modal fade bd-example" tabindex="-1" role="dialog" id="deviceList_${id}" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="row list-group fire justify-content-center" id="list-tab" role="tablist">
                                                <button
                                                    type="button"
                                                    class="list-group-item col active"
                                                    id="list-sensoIRIS_mio40_btn"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    data-toggle="tab"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MIO40</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mio04_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MIO04</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mio22_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MIO22</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mio22m_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MIO22M</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_minp_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1080.MINP.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MINP</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_minp_fire_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1080.MINP.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MINP (FIRE)</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_minp_gas_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1080.MINP.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MINP (GAS)</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_minp_panic_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1080.MINP.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MINP (PANIC)</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mout_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MOUT</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mout2401_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MOUT240/1</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mout2402_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MOUT240/2</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mcz_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MCZ</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mcp150_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1027. Call Point (IRIS).ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MCP150</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_t110_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/70.SensoIRIS_T110_S130.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS T110</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_t110_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/70.SensoIRIS_T110_S130.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS T110 IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_s130_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/70.SensoIRIS_T110_S130.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS S130</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_s130_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/70.SensoIRIS_T110_S130.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS S130 IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_m140_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/71.SensoIRIS_M140.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS M140</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_m140_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/71.SensoIRIS_M140.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS M140 IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wsou_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/72.SensoIRIS_WSOU.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSOU</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wsou_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/72.SensoIRIS_WSOU.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSOU IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wsst_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/75.SensoIRIS_wsst.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSST</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wsst_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/75.SensoIRIS_wsst.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSST IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wstr_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/72.SensoIRIS_WSOU.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSTR</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_wstr_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/72.SensoIRIS_WSOU.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS WSTR IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bsou_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSOU</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bsou_is_btn"
                                                    data-toggle="tab"
                                                    honclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSOU IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bsst_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSST</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bsst_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSST IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bstr_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSTR</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_bstr_is_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/BSOU-600x460.png"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS BSTR IS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_gas_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1081.SensoIRIS_GAS.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS GAS</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_gas_sense_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1081.SensoIRIS_GAS.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS GAS SENSE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mc-d_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/68.SensoIRIS_address_base.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MC-D</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-callpoint_mcp50_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/27. Call Point (IRIS).ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>CALLPOINT MCP50</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-m22_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1058. IRIS M22_IRIS Zone.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>M22</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sounder_wsou_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/1059. Sounder WSOU.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SOUNDER WSOU</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button
                                                    type="button"
                                                    class="list-group-item col"
                                                    id="list-sensoIRIS_mimic_btn"
                                                    data-toggle="tab"
                                                    onclick="javascript: addConcreteDevice2(this.id, '${id}')"
                                                    role="tab"
                                                    aria-selected="false"
                                                >
                                                    <div class="btnStyle fire">
                                                        <img
                                                            src="../../Images/69.SensoIRIS_Module_box.ico"
                                                            alt=""
                                                            width="50"
                                                            height="50"
                                                            class="m15"
                                                        />
                                                        <div class="someS">
                                                            <h5>SensoIRIS MIMIC</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="bottom: 10px; position: absolute;" class="buttons-row mt-5">
                                    
                                    <button style="display: inline-flex;" type="button" data-toggle="modal" data-target="#deviceList_${id}" id="device_btn_${id}" class="btn-round btn-border-black">
                                        <i class="fa-solid fa-plus 5x"></i> Add New Device in ${id.replaceAll("_", " ")}
                                    </button>
                                </div>`;

                var proxy_target = `<div class="row fullHeight">
                                    <div class="col-3 bl fire scroll">
                                        <p>Sensors</p>
                                        <div id="new_sensor_${id}" class="row">

                                        </div>
                                        <p>Modules</p>
                                        <div id="new_module_${id}" class="row">

                                        </div>
                                    </div>
                                    <div class="col-9" style="z-index: 1;height: fit-content;">
                                        <div id="selected_sensor_${id}" style="background: white;">

                                        </div>
                                    </div>
                                </div>

                               <div class="modal fade bd-example" tabindex="-1" role="dialog" id="sensorList_${id}" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="row list-group fire" id="list-tab" role="tablist">
                                                <div class="col-12">Sensors</div>
                                                <button type="button"
                                                        class="list-group-item col active"
                                                        id="1251_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/17.1251E.png"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>1251</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="22051e_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>22051E</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="22051eise_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>22051EISE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="6200_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/18. 6200 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>6200</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="ftxp1_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/19. Filtrex (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>FTXP1</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="6500_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/20. 6500 (IRIS).png"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>6500</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="52051e_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>52051E</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="52051re_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>52051RE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="52051hte_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>52051HTE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="52051te/tle/ctle_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/22. 22051TE (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>52051TE / TLE / CTLE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="lzr1m_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/17.1251E.png"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>LZR1M</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="7251_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'sensor')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/23. 7251 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>7251</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <div class="col-12">Modules</div>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m210e_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M210E</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m220e_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M220E</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m221einput_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M221EINPUT</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m221eoutput_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M221EOUTPUT</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m201e_supervized_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M201E SUPERVIZED</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m501me_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/26. M503ME (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M501ME</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m503me_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/26. M503ME (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M503ME</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="call_point_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/27. Call Point (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>CALL POINT</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m512me_(zone_monitor)_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/29. M512 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M512ME (ZONE MONITOR)</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m201e_unsupervized_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M201E UNSUPERVIZED</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="sounder_/_strobe_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/28. Sounder_Strobe (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>SOUNDER / STROBE</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                                <button type="button"
                                                        class="list-group-item col"
                                                        id="m210e-cz_(zone_monitor)_btn"
                                                        onclick="javascript: addSensor(this.id, '${id}', 'module')"
                                                        data-toggle="tab"
                                                        role="tab"
                                                        aria-selected="false">
                                                    <div class="btnStyle fire">
                                                        <img src="../../Images/25. M201_M221 (IRIS).ico"
                                                                alt=""
                                                                width="50"
                                                                height="50"
                                                                class="m15" />
                                                        <div class="someS">
                                                            <h5>M210E-CZ (ZONE MONiTOR)</h5>
                                                        </div>
                                                    </div>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="bottom: 10px; position: absolute;" class="buttons-row mt-5">

                                    <button style="display: inline-flex;" type="button" data-toggle="modal" data-target="#sensorList_${id}" id="sensor_btn_${id}" class="btn-round btn-border-black">
                                        <i class="fa-solid fa-plus 5x"></i> Add New Sensor in ${id.replaceAll("_", " ")}
                                    </button>
                                </div>`;

                switch (true) {
                    case id.includes("system_sensor_loop"): el.innerHTML = proxy_target; break;
                    case id.includes("teletek_loop"): el.innerHTML = target; break;

                    default: break;
                }
            }


            function showSensor(id, loop_id, type) {
                var el = document.getElementById(`selected_sensor_${loop_id}`);

                alarm_level = false; alarm_value = 0;
                switch (true) {
                    case id.split('_')[0] === ('22051e'):
                    case id.includes('1251'): alarm_value = 2;
                    case id.includes('7251'):
                    case id.includes('52051te/tle/ctle'): alarm_level = true; break;

                    default: break;
                }
                var idNum = id.split('_')[id.split('_').length - 1];
                var target = `<fieldset id="id_${idNum}">
                                            <legend>Device</legend>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="name">Name</label>
                                                        <input type="text" id="name" name="name" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww disabled">
                                                        <label for="device_state">State</label>
                                                        <div class="select">
                                                            <select id="device_state"
                                                                    name="device_state">
                                                                <option value="none">NONE</option>
                                                                <option value="normal" selected>NORMAL</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        ${alarm_level ? `<fieldset>
                                            <legend>Alarm Level</legend>
                                            <div class="row align-items-center">
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="day_alarm_level">Day</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="day_alarm_level"
                                                               name="day_alarm_level"
                                                               data-maxlength="1"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               value="${alarm_value}"
                                                               min="0"
                                                               max="3" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="night_alarm_level">Night</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="night_alarm_level"
                                                               name="night_alarm_level"
                                                               data-maxlength="1"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               value="${alarm_value}"
                                                               min="0"
                                                               max="3" />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>` : ''}

                                        <fieldset>
                                            <legend>Parameters</legend>
                                            <div class="row align-items-center">
                                                <div class="col-xs-12 col-lg-6">
                                                    <div class="form-item roww">
                                                        <label for="zone">Zone</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="zone"
                                                               name="zone"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="led">LED</label>
                                                        <p class="fire bordered">
                                                            OFF
                                                            <label class="switch">
                                                                <input type="checkbox" id="led" checked/>
                                                                <span class="slider"></span>
                                                            </label>
                                                            ON
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Verify Time</legend>
                                            <div class="row">
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="day-verify-time">Day [sec]</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="day-verify-time"
                                                               name="day-verify-time"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               value="0"
                                                               min="0"
                                                               max="60" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="night-verify-time">Night [sec]</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="night-verify-time"
                                                               name="night-verify-time"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               value="0"
                                                               min="0"
                                                               max="60" />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        <div class="buttons-row mt15">

                                        </div>`;
                var proxy_target = `<fieldset id="id_${idNum}">
                                    <legend>Device</legend>
                                    <div class="row">
                                        <div class="col">
                                            <div class="form-item roww">
                                                <label for="name">Name</label>
                                                <input type="text" id="name" name="name" />
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-item roww disabled">
                                                <label for="device_state">State</label>
                                                <div class="select">
                                                    <select id="device_state"
                                                            name="device_state">
                                                        <option value="none">NONE</option>
                                                        <option value="normal" selected>NORMAL</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <fieldset>
                                    <legend>Parameters</legend>
                                    <div class="row align-items-center">
                                        <div class="col-xs-12 col-lg-6">
                                            <div class="form-item roww">
                                                <label for="zone">Zone</label>
                                                <input class="ml10"
                                                       type="number"
                                                       id="zone"
                                                       name="zone"
                                                       data-maxlength="2"
                                                       oninput="javascript: myFunction(this.id)"
                                                       onblur="javascript: myFunction2(this.id)"
                                                       placeholder="1"
                                                       min="1"
                                                       max="96" />
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-item roww">
                                                <label for="led">LED</label>
                                                <p class="fire bordered">
                                                    OFF
                                                    <label class="switch">
                                                        <input type="checkbox" id="led" checked/>
                                                        <span class="slider"></span>
                                                    </label>
                                                    ON
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                                <div class="buttons-row mt15">

                                </div>`;
                if (type === 'sensor') {
                    el.innerHTML = target;
                } else {
                    el.innerHTML = proxy_target;
                }
                addVisitedBackground();
            }

            var sensorsLst2 = [];
            const sensors = 200;
            function addSensor(id, loop_id, type) {
                for (i = 1; i <= sensors; i++) {
                    if (sensorsLst2.includes(i)) {
                        continue;
                    } else {
                        var last = i;
                        break;
                    }
                }

                if (sensorsLst2.includes(parseInt(+id))) {
                    // if function called from concrete sensor, it removes the sensor
                    var elem = document.querySelector(`[id $= ${loop_id}_${type}_${+id}]`);
                    if (elem) elem.parentNode.removeChild(elem);
                    sensorsLst2 = sensorsLst2.filter(function (item) {
                        return item !== +id
                    })

                    // delete the current visible settings if shown
                    var el = document.getElementById(`id_${id}`);
                    if (el) el.parentNode.innerHTML = '';

                    // should add new sensor button be shown in case it is hidden
                    let button = document.getElementById(`sensor_btn_${loop_id}`);
                    if (sensorsLst2.length < sensors && button.style.display === "none") {
                        button.style.display = "inline-flex";
                    }
                }
                else {
                    // if a new sensor is requested
                    let imgSource = "../../Images/";
                    let link = id.split("_");
                    let curr = link.splice(link.length - 1)[0];
                    link = link.join("_");
                    let title = link.toUpperCase().replaceAll("_", " ").replaceAll("/", " / ");

                    // set the image source
                    switch (link) {
                        case 'sounder_/_strobe': imgSource += '28. Sounder_Strobe (IRIS).ico'; break;
                        case 'm512me_(zone_monitor)': imgSource += '29. M512 (IRIS).ico'; break;
                        case 'call_point': imgSource += '27. Call Point (IRIS).ico'; break;
                        case 'm503me':
                        case 'm501me': imgSource += '26. M503ME (IRIS).ico'; break;
                        case 'm210e-cz_(zone_monitor)':
                        case 'm201e_unsupervized':
                        case 'm201e_supervized':
                        case 'm221eoutput':
                        case 'm221einput':
                        case 'm220e':
                        case 'm210e': imgSource += '25. M201_M221 (IRIS).ico'; break;
                        case '7251': imgSource += '23. 7251 (IRIS).ico'; break;
                        case 'lzr1m':
                        case '1251': imgSource += '17.1251E.png'; break;
                        case 'ftxp1': imgSource += '19. Filtrex (IRIS).ico'; break;
                        case '6200': imgSource += '18. 6200 (IRIS).ico'; break;
                        case '6500': imgSource += '20. 6500 (IRIS).png'; break;
                        default: imgSource += "22. 22051TE (IRIS).ico";
                    }

                    const newUserElement = `
                                                                    <div class="col-12" id='${loop_id}_${type}_${last}'>
                                                                        <div class="row">
                                                                            <div class="col-10 pr-1">
                                                                                <a href="javascript:showSensor('${link}_${last}', '${loop_id}', '${type}')" onclick="javascript:addActive('#selected_device')" >
                                                                                    <div class="btnStyle fire">
                                                                                        <img src="${imgSource}" alt="" width="25" height="25" class="m15" />
                                                                                        <div class="someS">
                                                                                            <h5>${title}</h5>
                                                                                        </div>
                                                                                    </div>
                                                                                </a>
                                                                            </div>
                                                                            <div class="col-1 p-0 mb-0" onclick="javascript:addSensor(${last}, '${loop_id}', '${type}')">
                                                                                <i class="fa-solid fa-xmark fire"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>`;
                    // adds the new sensor
                    var element = document.getElementById(`new_${type}_${loop_id}`);
                    var new_inner = `
                                                        ${element.innerHTML}
                                                        ${newUserElement}
                                                    `;
                    sensorsLst2.push(last);
                    element.innerHTML = new_inner;

                    // reordering
                    var main = document.getElementById(`new_${type}_${loop_id}`);

                    [].map.call(main.children, Object).sort(function (a, b) {
                        return +a.id.match(/\d+$/) - +b.id.match(/\d+$/);
                    }).forEach(function (elem) {
                        main.appendChild(elem);
                    });

                    // button display check
                    if (sensorsLst2.length === sensors) {
                        let button = document.getElementById(`sensor_btn_${loop_id}`);
                        button.style.display = "none";
                    }
                    $(`#sensorList_${loop_id}`).modal('toggle');
                }
            }


            var lst = [];
            const devices = 4;
            function addConcreteDevice(id) {
                for (i = 1; i <= devices; i++) {
                    if (lst.includes(i)) {
                        continue;
                    } else {
                        var last = i;
                        break;
                    }
                }
                if (lst.includes(parseInt(+id))) {
                    var elems = document.querySelectorAll(`[id $= 'loop_${id}']`);
                    if (elems.length > 0) {
                        var selected_device = document.getElementById("selected_device");
                        selected_device.innerHTML = "";
                    }
                    var elem = document.querySelector(`[id $= '${id}']`);
                    if (elem) elem.parentNode.removeChild(elem);
                    lst = lst.filter(function (item) {
                        return item !== +id
                    })

                    let button = document.getElementById("device_btn");
                    if (lst.length < devices && button.style.display === "none") {
                        button.style.display = "inline-flex";
                    }
                }
                else {
                    let imgSource = "../../Images/";
                    let link = id.substr(5); //.substr(0, id.length - 4);
                    let title = link.toUpperCase().replaceAll("_", " ");
                    switch (link) {
                        default: imgSource += "1013.LoopDecices.ico";
                    }
                    const newUserElement = `
                        <div class="col-12" id='${last}'>
                            <div class="row">
                                <div class="col-10 pr-1">
                                    <a href="javascript:showDevice('${link}_${last}')" onclick="javascript:addActive('#new_device')" >
                                        <div class="btnStyle fire">
                                            ${imgSource.includes("1013") ? (
                                            `
                                                <i class="fa-solid fa-arrows-spin fa-3x p15">
                                                    <br /><span class="someS">
                                                        <span class="h5">
                                                            ${title + ' ' + last}
                                                        </span>
                                                    </span>
                                                </i>
                                            `
                                            ) : (
                                            `
                                                <img src="${imgSource}" alt="" width="25" height="25" class="m15" />
                                                <div class="someS">
                                                    <h5>${title + ' ' + last}</h5>
                                                </div>
                                            `
                                            )}
                                        </div>
                                    </a>
                                </div>
                                <div class="col-1 p-0 m-0" onclick="javascript:addConcreteDevice(${last})">
                                    <i class="fa-solid fa-xmark fire"></i>
                                </div>
                            </div>
                        </div>
                                    `;
                    var element = document.getElementById("new_device");
                    var new_inner = `
                                        ${element.innerHTML}
                                        ${newUserElement}
                                    `;
                    lst.push(last);
                    element.innerHTML = new_inner;

                    // button display check
                    if (lst.length === devices) {
                        let button = document.getElementById("device_btn");
                        button.style.display = "none";
                    }
                    $('#deviceList').modal('toggle');
                }
            }

            function showDevice2(id, loop_id) {
                var el = document.getElementById(`selected_device_${loop_id}`);

                let i = false; let o = false; let c = false; let p = false;
                let st = false; let n = false;
                switch (true) {
                    case id.includes('sensoIRIS_gas_sense'): i = true; c = true;
                    case id.includes('sensoIRIS_gas'):
                    case id.includes('sensoIRIS_m140_is'):
                    case id.includes('sensoIRIS_m140'):
                    case id.includes('sensoIRIS_s130_is'):
                    case id.includes('sensoIRIS_s130'):
                    case id.includes('sensoIRIS_minp_panic'):
                    case id.includes('sensoIRIS_minp_gas'):
                    case id.includes('_mio40_'): i = true; break;
                    case id.includes('_mio22_'): i = true; o = true; break;
                    case id.includes('_mio22m_'): i = true; o = true; break;
                    case id.includes('sensoIRIS_mcp150'): p = true; break;
                    case id.includes('sensoIRIS_bstr_is'):
                    case id.includes('sensoIRIS_bstr'):
                    case id.includes('sensoIRIS_wstr_is'):
                    case id.includes('sensoIRIS_wstr'): n = true;
                    case id.includes('sensoIRIS_bsst_is'):
                    case id.includes('sensoIRIS_bsst'):
                    case id.includes('sensoIRIS_wsst'):
                    case id.includes('sensoIRIS_wsst'): st = true;
                    case id.includes('sensoIRIS_bsou_is'):
                    case id.includes('sensoIRIS_bsou'):
                    case id.includes('sensoIRIS_wsou_is'):
                    case id.includes('sensoIRIS_wsou'): p = true;
                    case id.includes('sensoIRIS_mimic'):
                    case id.includes('sensoIRIS_mcz'):
                    case id.includes('sensoIRIS_mout2402'):
                    case id.includes('sensoIRIS_mout2401'):
                    case id.includes('sensoIRIS_mout'): c = true; break;
                    case id.includes('m22'): c = true;
                    case id.includes('sounder_wsou'): o = true; break;
                    case id.includes('sensoIRIS_mc-d'): n = true; break;
                    case id.includes('callpoint_mcp50'): st = true; break;
                    default: break;
                }
                var idNum = id.split('_')[id.split('_').length - 1];
                var target = `<fieldset id="id_${idNum}">
                                            <legend>Device</legend>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-item roww disabled">
                                                        <label for="device_state">State</label>
                                                        <div class="select">
                                                            <select id="device_state"
                                                                    name="device_state">
                                                                <option value="none">NONE</option>
                                                                <option value="normal" selected>NORMAL</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="name">Name</label>
                                                        <input type="text" id="name" name="name" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww disabled">
                                                        <label for="serial_id">Serial ID</label>
                                                        <input type="text" id="serial_id" name="serial_id" />
                                                    </div>
                                                </div>

                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Parameters</legend>
                                            <div class="row align-items-center">
                                                <div class="${i ? 'col-6' : 'col'}">
                                                    <div class="form-item roww">
                                                        <label for="zone">Zone</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="zone"
                                                               name="zone"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    ${o ? `<div class="form-item roww">
                                                        <label for="sounder_group">Sounder Group</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="sounder_group"
                                                               name="sounder_group"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>` : ''}
                                                    ${i ? `
                                                        <div class="form-item roww">
                                                            <label for="sounder_on">SOUNDER</label>
                                                            <p class="fire bordered">
                                                                OFF
                                                                <label class="switch">
                                                                    <input type="checkbox" id="sounder_on" name="sounder_on" ${c ? '' : 'checked'}/>
                                                                    <span class="slider"></span>
                                                                </label>
                                                                ON
                                                            </p>
                                                        </div>` : ''}
                                                    ${st ? `<div class="form-item roww">
                                                            <label for="evacuate">Evacuate</label>
                                                            <input type="checkbox" id="evacuate" name="evacuate" class="ml10" checked />
                                                        </div>` : ''}
                                                </div>
                                                ${c ? `<div class="col"><div class="form-item roww">
                                                            <label for="led">LED</label>
                                                            <p class="fire bordered">
                                                                OFF
                                                                <label class="switch">
                                                                    <input type="checkbox" id="led" checked/>
                                                                    <span class="slider"></span>
                                                                </label>
                                                                ON
                                                            </p>
                                                    </div></div>` : ''}
                                            </div>
                                            ${p ? `<div class="row align-items-center mt-1">
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="event">Event</label>
                                                        <div class="select">
                                                            <select id="event"
                                                                    name="event">
                                                                <option value="alarms">Alarms</option>
                                                                <option value="evacuate">Evacuate</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="led">LED</label>
                                                        <p class="fire bordered">
                                                            OFF
                                                            <label class="switch">
                                                                <input type="checkbox" id="led" checked/>
                                                                <span class="slider"></span>
                                                            </label>
                                                            ON
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>` : ''}
                                        </fieldset>

                                        ${n ? `<fieldset>
                                            <legend>Verify Time</legend>
                                            <div class="row">
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="day-verify-time">Day [sec]</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="day-verify-time"
                                                               name="day-verify-time"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               min="0"
                                                               max="60" />
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="night-verify-time">Night [sec]</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="night-verify-time"
                                                               name="night-verify-time"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="0"
                                                               min="0"
                                                               max="60" />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>` : ''}

                                        <div class="buttons-row mt15">
                                            
                                        </div>`;
                var proxy_target = `<fieldset id="id_${idNum}">
                                            <legend>Device</legend>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-item roww disabled">
                                                        <label for="device_state">State</label>
                                                        <div class="select">
                                                            <select id="device_state"
                                                                    name="device_state">
                                                                <option value="none">NONE</option>
                                                                <option value="normal" selected>NORMAL</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="name">Name</label>
                                                        <input type="text" id="name" name="name" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww disabled">
                                                        <label for="serial_id">Serial ID</label>
                                                        <input type="text" id="serial_id" name="serial_id" />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Parameters</legend>
                                            <div class="row align-items-center">
                                                <div class="${i && !o ? 'col-6' : 'col-4'}">
                                                    <div class="form-item roww">
                                                        <label for="zone">Zone</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="zone"
                                                               name="zone"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               value="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>
                                                </div>
                                                ${i && !o ? '' : `<div class="col">
                                                    <div class="form-item roww">
                                                        <label for="sounder_group">Sounder Group</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="sounder_group"
                                                               name="sounder_group"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               value="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>
                                                </div>`}
                                                ${n ? '' : `${p ? `<div class="col-12 mt-1">
                                                    <div class="form-item roww">
                                                        ${st ? `<label for="parameters">Parameters</label>
                                                        <div class="select">
                                                            <select id="parameters"
                                                                    name="parameters">
                                                                <option value="sound-high_level-strobe">Sound / High Level / Strobe</option>
                                                                <option value="sound-low_level-strobe">Sound / Low Level / Strobe</option>
                                                                <option value="sound-high_level">Sound / High Level</option>
                                                                <option value="sound-low_level">Sound / Low Level</option>
                                                                <option value="strobe-high_level">Strobe / High Level</option>
                                                                <option value="strobe-low_level">Strobe / Low Level</option>
                                                            </select>
                                                        </div>` : `<label for="sound">Sound</label>
                                                        <div class="select">
                                                            <select id="sound"
                                                                    name="sound">
                                                                <option value="high_level">High Level</option>
                                                                <option value="low_level">Low Level</option>
                                                            </select>
                                                        </div>`}
                                                    </div>
                                                </div>` : `<div class="col">
                                                    <div class="form-item roww">
                                                        <label for="led">LED</label>
                                                        <p class="fire bordered">
                                                            OFF
                                                            <label class="switch">
                                                                <input type="checkbox" id="led" checked/>
                                                                <span class="slider"></span>
                                                            </label>
                                                            ON
                                                        </p>
                                                    </div>`}`}
                                                </div>
                                            </div>
                                        </fieldset>

                                        ${p ? '' : `<fieldset>
                                            <legend>Channels</legend>
                                            <div class="row align-items-center">
                                                <div class="col-12">
                                                    <div class="form-item roww">
                                                        <label for="name_channel_1">Channel 1</label>
                                                        <input type="text" id="name_channel_1" name="name_channel_1" placeholder="Channel 1 name"/>
                                                        <div class="select mt-1">
                                                            <select id="channel_1"
                                                                    name="channel_1">
                                                                ${i ? `<option value="input" selected>Input</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="gas_alarm">GAS ALARM !</option>
                                                                <option value="panic">PANIC !</option>` : `<option value="output" selected>Output</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="reset">Reset</option>
                                                                <option value="sounder_mode">Sounder Mode</option>`}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            ${!c ? `<div class="row align-items-center">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-item roww">
                                                        <label for="name_channel_2">Channel 2</label>
                                                        <input type="text" id="name_channel_2" name="name_channel_2" placeholder="Channel 2 name"/>

                                                        <div class="select mt-1">
                                                            <select id="channel_2"
                                                                    name="channel_2">
                                                                ${i ? `<option value="input" selected>Input</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="gas_alarm">GAS ALARM !</option>
                                                                <option value="panic">PANIC !</option>` : `<option value="output" selected>Output</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="reset">Reset</option>
                                                                <option value="sounder_mode">Sounder Mode</option>`}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row align-items-center">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-item roww">
                                                        <label for="name_channel_3">Channel 3</label>
                                                        <input type="text" id="name_channel_3" name="name_channel_3" placeholder="Channel 3 name"/>

                                                        <div class="select mt-1">
                                                            <select id="channel_3"
                                                                    name="channel_3">
                                                                ${i && !o ? `<option value="input" selected>Input</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="gas_alarm">GAS ALARM !</option>
                                                                <option value="panic">PANIC !</option>` : `<option value="output" selected>Output</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="reset">Reset</option>
                                                                <option value="sounder_mode">Sounder Mode</option>`}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row align-items-center">
                                                <div class="col-xs-12 col-sm-6">
                                                    <div class="form-item roww">
                                                        <label for="name_channel_4">Channel 4</label>
                                                        <input type="text" id="name_channel_4" name="name_channel_4" placeholder="Channel 4 name"/>

                                                        <div class="select mt-1">
                                                            <select id="channel_4"
                                                                    name="channel_4">
                                                                ${i && !o ? `<option value="input" selected>Input</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="gas_alarm">GAS ALARM !</option>
                                                                <option value="panic">PANIC !</option>` : `<option value="output" selected>Output</option>
                                                                <option value="alarm">Alarm</option>
                                                                <option value="evacuate">Evacuate</option>
                                                                <option value="reset">Reset</option>
                                                                <option value="sounder_mode">Sounder Mode</option>`}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>` : ''}
                                        </fieldset>`}


                                        <div class="buttons-row mt15">
                                            
                                        </div>`;
                var ttarget = `<fieldset id="id_${idNum}">
                                            <legend>Device</legend>
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-item roww disabled">
                                                        <label for="device_state">State</label>
                                                        <div class="select">
                                                            <select id="device_state"
                                                                    name="device_state">
                                                                <option value="none">NONE</option>
                                                                <option value="normal" selected>NORMAL</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww">
                                                        <label for="name">Name</label>
                                                        <input type="text" id="name" name="name" />
                                                    </div>
                                                </div>
                                                <div class="col">
                                                    <div class="form-item roww disabled">
                                                        <label for="serial_id">Serial ID</label>
                                                        <input type="text" id="serial_id" name="serial_id" />
                                                    </div>
                                                </div>

                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>RI Output/Group</legend>
                                            <div class="row">
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="group_number">Group Number</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="group_number"
                                                               name="group_number"
                                                               data-maxlength="3"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               value="0"
                                                               min="0"
                                                               max="100" />
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="activation">Activation</label>
                                                        <input type="checkbox" id="activation" name="activation" class="ml10" />
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Alarm Level</legend>
                                            <div class="row">
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="day">Day</label>
                                                        <div class="select">
                                                            <select id="day"
                                                                    name="day">
                                                                <option value="a1r">A1R</option>
                                                                <option value="a2s">A2S</option>
                                                                <option value="bs">BS</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-item roww">
                                                        <label for="night">Night</label>
                                                        <div class="select">
                                                            <select id="night"
                                                                    name="night">
                                                                <option value="a1r">A1R</option>
                                                                <option value="a2s">A2S</option>
                                                                <option value="bs">BS</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Parameters</legend>
                                            <div class="row align-items-center">
                                                <div class="${i ? 'col-xs-12 col-lg-4' : 'col-xs-12 col-lg-6'}">
                                                    <div class="form-item roww">
                                                        <label for="zone">Zone</label>
                                                        <input class="ml10"
                                                               type="number"
                                                               id="zone"
                                                               name="zone"
                                                               data-maxlength="2"
                                                               oninput="javascript: myFunction(this.id)"
                                                               onblur="javascript: myFunction2(this.id)"
                                                               placeholder="1"
                                                               min="1"
                                                               max="96" />
                                                    </div>
                                                </div>
                                                ${i ? `<div class="col-xs-12 col-lg-4">
                                                    <div class="form-item roww disabled">
                                                        <label for="dust_level">Dust Level [%]</label>
                                                        <input type="text" id="dust_level" name="dust_level" value="??" maxlength="4"/>
                                                    </div>
                                                </div>` : ''}
                                                <div class="${i ? 'col-12 mt-2' : 'col'}">
                                                    <label for="led">LED</label>
                                                     <p class="fire bordered">
                                                        OFF
                                                        <label class="switch">
                                                            <input type="checkbox" id="led" checked/>
                                                            <span class="slider"></span>
                                                        </label>
                                                        ON
                                                    </p>
                                                </div>
                                            </div>
                                        </fieldset>                                        

                                        <div class="buttons-row mt15">

                                        </div>`;
                switch (true) {
                    case id.includes("sensoIRIS_bstr_is"):
                    case id.includes("sensoIRIS_bstr"):
                    case id.includes("sensoIRIS_bsst_is"):
                    case id.includes("sensoIRIS_bsst"):
                    case id.includes("sensoIRIS_bsou_is"):
                    case id.includes("sensoIRIS_bsou"):
                    case id.includes("sensoIRIS_wstr_is"):
                    case id.includes("sensoIRIS_wstr"):
                    case id.includes("sensoIRIS_wsst_is"):
                    case id.includes("sensoIRIS_wsst"):
                    case id.includes("sensoIRIS_wsou_is"):
                    case id.includes("sensoIRIS_wsou"):
                    case id.includes("sensoIRIS_mout2402"):
                    case id.includes("sensoIRIS_mout2401"):
                    case id.includes("sensoIRIS_mout"):
                    case id.includes("sensoIRIS_mio22m"):
                    case id.includes("sensoIRIS_mio22"):
                    case id.includes("sensoIRIS_mio04"):
                    case id.includes("sensoIRIS_mio40"): el.innerHTML = proxy_target; break;
                    case id.includes("sensoIRIS_mimic"):
                    case id.includes("sounder_wsou"):
                    case id.includes("m22"):
                    case id.includes("callpoint_mcp50"):
                    case id.includes("sensoIRIS_mc-d"):
                    case id.includes("sensoIRIS_gas_sense"):
                    case id.includes("sensoIRIS_gas"):
                    case id.includes("sensoIRIS_mcp150"):
                    case id.includes("sensoIRIS_mcz"):
                    case id.includes("sensoIRIS_minp_panic"):
                    case id.includes("sensoIRIS_minp_fire"):
                    case id.includes("sensoIRIS_minp"): el.innerHTML = target; break;

                    default: el.innerHTML = ttarget; break;
                }
                collapsible();
                addVisitedBackground();
            }

            var lst2 = [];
            const devices2 = 250;
            function addConcreteDevice2(id, loop_id) {
                for (i = 1; i <= devices2; i++) {
                    if (lst2.includes(i)) {
                        continue;
                    } else {
                        var last = i;
                        break;
                    }
                }
                if (lst2.includes(parseInt(+id))) {

                    var elem = document.querySelector(`[id $= ${loop_id}_${+id}]`);
                    if (elem) elem.parentNode.removeChild(elem);
                    lst2 = lst2.filter(function (item) {
                        return item !== +id
                    })

                    var el = document.getElementById(`id_${id}`);
                    if (el) el.parentNode.innerHTML = '';

                    let button = document.getElementById(`device_btn_${loop_id}`);
                    if (lst2.length < devices2 && button.style.display === "none") {
                        button.style.display = "inline-flex";
                    }
                }
                else {
                    let imgSource = "../../Images/";
                    let link = id.substr(5).split("_");
                    let curr = link.splice(link.length - 1)[0];
                    link = link.join("_");
                    let title = link.toUpperCase().replaceAll("_", " ");


                    switch (link) {
                        case "sounder_wsou": imgSource += "1059. Sounder WSOU.ico"; break;
                        case "m22": imgSource += "1058. IRIS M22_IRIS Zone.ico"; break;
                        case "sensoIRIS_mc-d": imgSource += "68.SensoIRIS_address_base.ico"; break;
                        case "sensoIRIS_gas_sense":
                        case "sensoIRIS_gas": imgSource += "1081.SensoIRIS_GAS.ico"; break;
                        case "sensoIRIS_bstr_is":
                        case "sensoIRIS_bstr":
                        case "sensoIRIS_bsstis":
                        case "sensoIRIS_bsst":
                        case "sensoIRIS_bsou_is":
                        case "sensoIRIS_bsou": imgSource += "BSOU-600x460.png"; break;
                        case "sensoIRIS_wsst_is":
                        case "sensoIRIS_wsst": imgSource += "75.SensoIRIS_wsst.ico"; break;
                        case "sensoIRIS_wstr_is":
                        case "sensoIRIS_wstr":
                        case "sensoIRIS_wsou_is":
                        case "sensoIRIS_wsou": imgSource += "72.SensoIRIS_WSOU.ico"; break;
                        case "sensoIRIS_minp_gas":
                        case "sensoIRIS_minp_fire":
                        case "sensoIRIS_minp_panic":
                        case "sensoIRIS_minp": imgSource += "1080.MINP.ico"; break;
                        case "callpoint_mcp50":
                        case "sensoIRIS_mcp150": imgSource += "1027. Call Point (IRIS).ico"; break;
                        case "sensoIRIS_mimic":
                        case "sensoIRIS_mcz":
                        case "sensoIRIS_mout2401":
                        case "sensoIRIS_mout":
                        case "sensoIRIS_mio22m":
                        case "sensoIRIS_mio22":
                        case "sensoIRIS_mio04":
                        case "sensoIRIS_mio40": imgSource += "69.SensoIRIS_Module_box.ico"; break;
                        case "sensoIRIS_m140_is":
                        case "sensoIRIS_m140": imgSource += "71.SensoIRIS_M140.ico"; break;
                        default: imgSource += "70.SensoIRIS_T110_S130.ico";
                    }
                    const newUserElement = `
                                                                    <div class="col-12" id='${loop_id}_${last}'>
                                                                        <div class="row">
                                                                            <div class="col-10 pr-1">
                                                                                <a href="javascript:showDevice2('${link}_${last}', '${loop_id}')" onclick="javascript:addActive('#selected_device')" >
                                                                                    <div class="btnStyle fire">
                                                                                        <img src="${imgSource}" alt="" width="25" height="25" class="m15" />
                                                                                        <div class="someS">
                                                                                            <div class="h5">${last + '. ' + title}</div>
                                                                                        </div>
                                                                                    </div>
                                                                                </a>
                                                                            </div>
                                                                            <div class="col-1 p-0 m-0" onclick="javascript:addConcreteDevice2(${last}, '${loop_id}')">
                                                                                <i class="fa-solid fa-xmark fire"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                                `;
                    var element = document.getElementById(`new_device_${loop_id}`);
                    var new_inner = `
                                        ${element.innerHTML}
                                        ${newUserElement}
                                    `;
                    lst2.push(last);
                    element.innerHTML = new_inner;

                    // reordering
                    var main = document.getElementById(`new_device_${loop_id}`);

                    [].map.call(main.children, Object).sort(function (a, b) {
                        return +a.id.match(/\d+$/) - +b.id.match(/\d+$/);
                    }).forEach(function (elem) {
                        main.appendChild(elem);
                    });

                    // button display check
                    if (lst2.length === devices2) {
                        let button = document.getElementById(`device_btn_${loop_id}`);
                        button.style.display = "none";
                    }
                    $(`#deviceList_${loop_id}`).modal('toggle');
                    
                }
            }
        </script>
    </div>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="../imports/jquery-3.6.0.js"></script>
    <script src="../imports/popper.min.js"></script>
    <script src="../imports/boostrap@4.3.1.min.js"></script>
    <script src="../imports/bootstrap-datepicker.min.js"></script>
    <script src="../imports/font-awesome.js"></script>
    <script src="../imports/mainfuncs.js"></script>
    <script>

        function sendMessage(bc) {
            CefSharp.PostMessage(bc);
        }
                    //$(document).ready(() => {
                    //    sendMessage("Devices|ECLIPSE|Timeslots");
                    //});
    </script>
</body>
</html>
